@using JSONRising.Models
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager

@namespace JSONRising.Components

@code {
    [Parameter]
    public JsonSchema Schema { get; set; }
}

<div class="mod-card">
    <img src="@Schema.IconUrl" alt="@Schema.Name icon" class="mod-icon" />
    <div class="mod-info">
        <h3>@Schema.Name</h3>
        <div class="mod-buttons">
            @if (!string.IsNullOrEmpty(Schema.DownloadUrl))
            {
                <button class="thunderstore-btn" @onclick="OpenThunderstoreUrl">Download</button>
            }
            <button class="json-btn" @onclick="NavigateToJson">JSON(s)</button>
        </div>
    </div>
</div>

@code {
    private async Task OpenThunderstoreUrl()
    {
        if (!string.IsNullOrEmpty(Schema.DownloadUrl))
        {
            await JSRuntime.InvokeVoidAsync("window.__TAURI__.shell.open", Schema.DownloadUrl);
        }
    }

    private void NavigateToJson()
    {
        NavigationManager.NavigateTo($"/editor/{Schema.Id}");
    }
}

<style>
    .mod-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 1rem;
        width: 250px;
        margin: 1rem;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .mod-icon {
        width: 128px;
        height: 128px;
        object-fit: cover;
        margin-bottom: 1rem;
    }

    .mod-info {
        text-align: center;
        width: 100%;
    }

    .mod-buttons {
        display: flex;
        gap: 0.5rem;
        justify-content: center;
        margin-top: 0.5rem;
    }

    button {
        padding: 0.5rem 1rem;
        border-radius: 4px;
        cursor: pointer;
    }
</style>
